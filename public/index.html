<?doctype html>
<html>
  <head>
    <link rel="stylesheet" href="css/main.css"/>
    <link rel="stylesheet" href="css/fonts.css"/>
    <link rel="stylesheet" href="css/typography.css"/>

    <meta name="viewport" content="width=device-width, user-scalable=no">
  </head>
  <body>
    <canvas class="main" width="1000" height="1000"></canvas>
    <div class="slides"></div>

    <script src="js/space.js"></script>
    <script src="js/space-draw-2d.js"></script>
    <script src="js/slides.js"></script>
    <script src="js/slide-definition.js"></script>
    <script src="js/slide-loader.js"></script>
    <script>
      var canvas, space, spaceDraw;

      canvas = document.getElementsByClassName('main')[0];
      space = new Space(canvas);
      space.start();
      spaceDraw = new SpaceDraw2d(space);

      var slideLoader, slides;

      slideLoader = new SlideLoader();
      slideLoader.getSlides('01-ratios', function (error, slides) {
          var slideElement;
          if (error) {
              console.log(error);
              return;
          }
          slideElement = document.getElementsByClassName('slides')[0];
          slides.setContainer(slideElement);

          slides.transitionToSlide(0);
      });


      tick();
      function tick () {
          space.tick();
          if (space.shouldRedraw) {
              spaceDraw.draw();
          }
          space.clearFlags();

          slides && slides.tick();

          requestAnimationFrame(tick);
      }

    </script>
  </body>
</html>
